function [b, kt15sn] = PlanckFiltered(T),
% function [b,kt15sn] = PlanckFiltered(T),
% Compute the Output from a radiometer with filtering window
%INPUT
%  T = abs temp or celcius
%  !! hand edit the table
%OUTPUT
% b in W sr^-1 m^-2  integrated over the optical band, normalized to 25C.
% kt15sn string serial number of the kt15 used.
%
% see wallace & hobbs p287
% see PlanckLaw.m
%function Bf = PlanckLaw(T,lambda,wlambda),
%
%Note: !! edit this function for the correct kt15

%======= ISAR1 ===========================================
%Tue, 06 May 2003 : ISAR sn01 Filter function
%23.1.2002
%    KT15.85   S/N 4832
%      12.SPK        Pyroelektrischer Detektor (LiTaO3)
%     160.SPK        9.6 - 11.5
%    microns           relative response    steps in microns        #steps
%  ## error 9.400000           11.500000 
%kt15sn='4832-isar1';  %!!
%f = [ ...
%9.430000            2.546310
%9.490000            5.793331
%9.550000            9.668717
%9.610000           14.968266
%9.670000           24.493301
%9.730000           34.960308
%9.790000           45.626378
%9.850000           50.791858
%9.910000           54.246059
%9.970000           57.813660
%10.030000           59.618147
%10.090000           59.564821
%10.150000           59.498671
%10.210000           59.664674
%10.270000           60.626505
%10.330000           61.658131
%10.390000           66.522749
%10.450000           67.121249
%10.510000           67.451023
%10.570000           66.894956
%10.630000           66.250330
%10.690000           65.625707
%10.750000           65.522968
%10.810000           65.577193
%10.870000           65.622867
%10.930000           66.302045
%10.990000           67.630746
%11.050000           68.972272
%11.110000           66.407322
%11.170000           50.950737
%11.230000           34.240797
%11.290000           17.971729
%11.350000           10.918391
%11.410000            6.826609
%11.470000            2.828826
%];

%==== ROSR2======
%kt15sn='11733-rosr2';
%f = [ ...
%9.43	2.54631		
%9.49	5.793331		
%9.55	9.668717		
%9.61	14.968266		
%9.67	24.493301		
%9.73	34.960308		
%9.79	45.626378		
%9.85	50.791858		
%9.91	54.246059		
%9.97	57.81366		
%10.03	59.618147		
%10.09	59.564821		
%10.15	59.498671		
%10.21	59.664674		
%10.27	60.626505		
%10.33	61.658131		
%10.39	66.661415		
%10.45	67.197654		
%10.51	67.322188		
%10.57	66.745603		
%10.63	66.105611		
%10.69	65.601903		
%10.75	65.535531		
%10.81	65.587775		
%10.87	65.780225		
%10.93	66.609891		
%10.99	67.941563		
%11.05	68.378		
%11.11	62.826194		
%11.17	47.07922		
%11.23	30.471426		
%11.29	16.337545		
%11.35	9.970368		
%11.41	5.900365		
%11.47	2.173417		
%];
%==== ROSR3======
%kt15sn='11935';
%f = [ ...
%	9.28	11.8
%	9.31	0.357667
%	9.37	3.002402
%	9.43	6.337686
%	9.49	10.413117
%	9.55	16.306198
%	9.61	25.963547
%	9.67	36.458515
%	9.73	46.351946
%	9.79	51.277052
%	9.85	54.747181
%	9.91	58.067127
%	9.97	59.610657
%	10.03	59.555529
%	10.09	59.521989
%	10.15	59.799777
%	10.21	60.771412
%	10.27	61.802468
%	10.33	62.807971
%	10.39	63.671959
%	10.45	64.496884
%	10.51	65.209094
%	10.57	65.209094
%	10.63	65.924249
%	10.69	66.522749
%	10.75	67.121249
%	10.81	67.451023
%	10.87	66.894956
%	10.93	66.25033
%	10.99	65.625707
%	11.05	65.522968
%	11.11	65.577193
%	11.17	65.622867
%	11.23	66.302045
%	11.29	67.630746
%	11.35	68.972272
%	11.41	66.407322
%	11.47	50.950737
%	11.53	34.240797
%	11.59	17.971729
%	11.65	10.918391
%	11.71	6.826609
%	11.77	2.828826
%];
%========ROSR5 ===========================================
kt15sn='kt1585-12763_rosr5';  %!!
f = [ ...
   8.9996  0.02246
   9.1996  0.096058
   9.3996  0.835901
   9.5996  11.556142
   9.7996  41.691696
   9.9996  62.972497
   10.1996 65.752398
   10.3996 69.004973
   10.5996 71.27746
   10.7996 75.196119
   10.9996 64.539929
   11.1996 14.168871
   11.3996 1.669582
   11.5996 0.280286
   11.7996 0.063774
   11.9996 0.014519
];

%============================
lambda=f(:,1)*1e-6;
w=f(:,2);

b=0;
for i=1:length(w),
	[k]=PlanckLaw(T,lambda(i));
	b = b + k*w(i);
end
b = b / sum(w);

return;

